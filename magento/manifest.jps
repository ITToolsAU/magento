jpsType: install
jpsVersion: '1.5.2'
id: magento
name: Magento
logo: https://raw.githubusercontent.com/jelastic-jps/magento/master/magento/images/magento.png
categories:
    - apps/e-commerce
    - apps/sales-and-marketing
homepage: http://www.magentocommerce.com/
description:
  en: Magento is the eCommerce software and platform trusted by the world's leading
      brands. Grow your online business with Magento!

baseUrl: https://raw.githubusercontent.com/sych74/magento/master/magento

onBeforeInit: /scripts/settings.js

globals:
  DB_USER: jelastic-${fn.random}
  DB_PASS: ${fn.password(10)}
  PROTOCOL: http
  ADMIN_PASS: ${fn.password(10)}

onInstall:

  - if (!${settings.ls-addon:false}):
      setGlobals:
        APP_SERVER: nginxphp

  - if (${settings.ls-addon:false}):
      setGlobals:
        APP_SERVER: litespeedphp
        
  - install:
    - jps: /topology/${globals.APP_SERVER}.jps?_r=${fn.random}
      envName: ${settings.envName}
      settings:
        magento_version: ${settings.magento_version}
        db_user: ${globals.DB_USER}
        db_pass: ${globals.DB_PASS}
        admin_pass: ${globals.ADMIN_PASS}

success:
  email: success/email/success.md?_r=${fn.random}
  text: success/text/success.md?_r=${fn.random}
